<!DOCTYPE html>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="style.css" />
<title>IBMULATOR</title>
</head>
<body>
<div class="center">
<img src="ibmulator.png" alt="IBMulator"/>
</div>
<h1 id="top">IBMulator - The IBM PS/1 Emulator</h1>
<ul class="menu">
<li><a href="#about">About</a></li>
<li><a href="#features">Features</a></li>
<li><a href="#media">Media</a></li>
<li><a href="#download">Download</a></li>
<li><a href="#usage">Usage</a>
<li><a href="#FAQ">FAQ</a>
<li><a href="#contact">Contact</a></li>
<li><a href="#disclaimer">Disclaimer</a>
</li>
</ul>

<hr />

<a href="#top"><h2 id="about">About</h2></a>
<p>
IBMulator is a free/libre, open source emulator for the <a href="https://en.wikipedia.org/wiki/IBM_PS/1">IBM PS/1</a>, 
able to run with the original ROM. 
The goal is to create a faithful emulation of the machine, complete of the characteristic 4-quadrant graphical user interface.
</p>
<p>
Currently IBMulator emulates only the PS/1 type 2011 with the 80286 CPU.
</p>
<p>
The program is in active development and still in a beta status. Expect bugs and missing features.
</p>

<hr />

<a href="#top"><h2 id="features">Features</h2></a>
<ul>
<li>Works with the original IBM ROM<br />IBM's peculiar 4-quad GUI and BASIC programming environment included!</li>
<li>PS/1 Audio Card emulation<br />8-bit DAC and a Programmable Sound Generator with 3 voices plus noise.</li>
<li>HDD and floppy emulation<br />You can use standard floppy and HDD images in LBA format, created for example with the <i>dd</i> Linux command.</li> The IBM's HDD 8-bit RLL interface is also emulated, so no additional IDE roms workarounds are needed.
<li>Realistic timings emulation.<br />The 286 10MHz CPU, the WDL-330P HDD, and the integrated VGA are as painfully slow as in the original, for the truest PS/1 experience. The Prefetch Queue is also emulated, so games like JetFighter work as expected.</li>
<li>OpenGL video output with shaders.<br />The video output can be manipulated with standard GLSL shaders; included is the <a href="http://timothylottes.blogspot.it/2014/08/scanlines.html">CRT shader by Timothy Lottes</a></li>
<li>Emulation of the working noise generated by the floppy drive, the HDD, and the system unit.</li>
<li>State recording and resuming.</li>
<li>Runs in Linux and Windows, 64-bit only.</li>
<li>Screenshots, audio WAV capture, and VGM dumping.<br />When an audio recording is started, music data from PS/1 and AdLib audio cards are also saved in <a href="https://en.wikipedia.org/wiki/VGM_%28file_format%29">VGM format.</a></li>
<li>Full OpenGL GUI.<br />Triple mode of operation: compact, normal, and realistic, for an added sense of realism.</li>
<li>Debugging tools.</li>
<li>Multithreaded.<br />OpenGL rendering, CPU core, and sound generation are on separate threads, so your i7 multi-core beast has some spare cycles for overclocking that puny 286.</li>
<li>Highly configurable.<br />You can create a dream PS/1 configuration, with 496MB HDD, 16MB RAM and a blazingly fast 30MHz 286 CPU, if you want to.</li>
</ul>
<h3>Currently missing features</h3>
<ul>
<li>MIDI output with redirection to an external sound module (like a real MT-32.)</li>
<li>Emulation for Sound Blaster and NE2000.</li>
<li>Video capture.</li>
<li>Better debugging tools with breakpoints.</li>
<li>OS X support (help needed.)</li>
</ul>

<hr />

<a href="#media"><h2 id="media">Media</h2></a>
<div class="media">
<video width="320" height="333" controls>
<source src="media/01_ibmulator_prince.mp4" type="video/mp4">
Your browser does not support the video tag!
</video>

<div class="images">
<a href="media/01_romshell.png"><img src="media/thumbs/01_romshell.png" /></a>
<a href="media/02_prgdid.png"><img src="media/thumbs/02_prgdid.png" /></a>
<a href="media/03_dosshell.png"><img src="media/thumbs/03_dosshell.png" /></a>
<a href="media/04_c.png"><img src="media/thumbs/04_c.png" /></a>
<a href="media/05_floppysel.png"><img src="media/thumbs/05_floppysel.png" /></a>
<a href="media/06_a.png"><img src="media/thumbs/06_a.png" /></a>
<a href="media/07_shader.png"><img src="media/thumbs/07_shader.png" /></a>
<a href="media/08_configur.png"><img src="media/thumbs/08_configur.png" /></a>
<a href="media/09_works.png"><img src="media/thumbs/09_works.png" /></a>
<a href="media/10_checkit.png"><img src="media/thumbs/10_checkit.png" /></a>
<a href="media/11_prince.png"><img src="media/thumbs/11_prince.png" /></a>
<a href="media/12_win31.png"><img src="media/thumbs/12_win31.png" /></a>
<a href="media/13_realistic.jpg"><img src="media/thumbs/13_realistic.png" /></a>
</div>
</div>


<div class="contentBlock"></div>



<hr />

<a href="#top"><h2 id="download">Download</h2></a>
<p>
Releases in binary form for Linux and Windows can be downloaded here:<br />
<a href="https://github.com/barotto/IBMulator/releases">
https://github.com/barotto/IBMulator/releases/</a>
</p>
<p>
If you're feeling brave and want to try bleeding edge code, or if you want to contribute, use the git
repository:<br />
<a href="https://github.com/barotto/IBMulator.git">
https://github.com/barotto/IBMulator.git</a>
</p>
<p>
ROMs and disk images are copyrighted materials and must be downloaded elsewhere 
(<a href="https://www.google.com/search?q=ibm+ps%2F1+rom+images">hint</a>).
</p>

<hr />

<a href="#top"><h2 id="usage">Usage</h2></a>
<h3>TL;DR version</h3>
<ol>
<li><a href="https://www.google.com/search?q=ibm+ps%2F1+rom+images">Obtain</a> a ROM set</li>
<li>Launch the program</li>
<li>Edit ibmulator.ini and specify the ROM set name</li>
<li>Relaunch and enjoy</li>
</ol>
<h3>Full version</h3>
<p>
In order to actually use the program you need the original ROM. You have the following options:
</p>
<ul>
<li>if you've got a real PS/1, take the program ROMDUMP.EXE in the 'extra' folder and put it in an empty floppy disk; insert the floppy disk in your PS/1 and launch the executable: it will create the ROM image on the floppy disk
<li>or open your PS/1, extract the EPROMs and read them with an EPROM reader (you also need to merge the 2 halves in 1 file, or 4 in 2 if you have a non-US model)
<li>or scour the Internet (there are various ROM sets available.)
</ul>
<p>
If you've got the BIN files, create a ROM set (see below for the correct format.)
</p>
<p>
Launch IBMulator. A window will inform you that the file ibmulator.ini has been created and where it is placed.
</p>
<p>
Put the ROM set anywhere you like (inside the same directory of ibmulator.ini is a good place) and update ibmulator.ini with the file name of the ROM set you want to use.
</p>
<p>
You also want to select (or create) the correct keyboard mapping.
</p>
<p>
From now on IBMulator is ready to run.
</p>
<p>
For more information regarding the configuration options, see the comments inside ibmulator.ini.
</p>
<p>
If you want to experiment with VGA shaders, set 'fb-scanlines.fs' in the ini file. It will try to emulate the VGA monitor. In this case, you should also use the compact GUI mode and go fullscreen, otherwise the higher res VGA modes can be a bit blurry.
</p>
<p>
Being a faithful emulator of the PS/1, to configure the system (ie. the PS/1, not the emulator) after a configuration change (for instance, if you add or remove a floppy drive), you need a DOS program called CONFIGUR.EXE, otherwise you'll get various POST errors. Likewise, if you want to customize the way the system works, you need to use the program CUSTOMIZ.EXE. Both files are copyright IBM and you have to search the Internet in order to obtain them.
</p>

<h3>ROM set</h3>
<p>
A ROM set can be:
</p>
<ol>
<li>a compressed archive in the ZIP format
<li>a file with the *.BIN extension, named as you like
<li>a directory 
</ol>
<p>
A ZIP archive or directory must contain (case insensitive):
</p>
<ul>
<li>FC0000.BIN : the system BIOS ROM, 256KiB
<li>F80000.BIN : the regional ROM, 256KiB, optional, only for non-US versions. For
international models, this bin file can be merged with FC0000.BIN to form a 
single 512KiB bin file. In this case FC0000.BIN, if present, is ignored.
</ul>
<p>
Any other file present in the archive or directory is ignored.
</p>

<h3>HDD image</h3>
<p>
The first time you launch IBMulator, an empty pre-formatted bootable hard disk image will be created.
</p>
<p>
If you have an original PS/1 backup disk-set you can restore the machine to its factory state. In order to do so:
</p>
<ol>
<li>insert a IBM PC-DOS 4.0 floppy disk in drive A
<li>go to the DOS prompt
<li>run "a:restore a: c: /s"
</ol>
<p>
Under Linux you can mount the HDD image using this command:
</p>
<pre>
$ mount -o loop,offset=16896 hdd.img /mnt/loop
</pre>
<p>
The offset value is equal to "start sector"*512. The start sector value can be determined with: 
</p>
<pre>
$ fdisk -l hdd.img
</pre>
<p>
<em>Note 1:</em> if you change the disk type from the default 35 (WDL-330P) to any other type, the automatically created image will be 0-filled and you'll need to use FDISK and FORMAT in order to use it.
</p>
<p>
<em>Note 2:</em> only types 35 and 38 have accurate timings emulation; any other type will have the same performance characteristics as type 35, unless otherwise specified in the ibmulator.ini file.
</p>

<h3>HDD types</h3>
<p>These are the BIOS supported HDD types:</p>
<pre>
Type   Cyl.   Heads    Sect.   Write    Land     Size
                               p-comp   Zone

 0       0      0        0         0       0    (none)
 1     306      4       17       128     305     10MB
 2     615      4       17       300     615     20MB
 3     615      6       17       300     615     31MB
 4     940      8       17       512     940     62MB
 5     940      6       17       512     940     47MB
 6     615      4       17        -1     615     20MB
 7     462      8       17       256     511     31MB
 8     733      5       17        -1     733     30MB
 9     900     15       17        -1     901    112MB
10     820      3       17        -1     820     20MB
11     855      5       17        -1     855     35MB
12     855      7       17        -1     855     50MB
13     306      8       17       128     319     20MB
14     733      7       17        -1     733     43MB
15       0      0        0         0       0    (none)
16     612      4       17         0     663     20MB
17     977      5       17       300     977     41MB
18     977      7       17        -1     977     57MB
19    1024      7       17       512    1023     59MB
20     733      5       17       300     732     30MB
21     733      7       17       300     732     43MB
22     733      5       17       300     733     30MB
23     306      4       17         0     336     10MB
24     612      4       17       305     663     20MB
25     306      4       17        -1     340     10MB
26     612      4       17        -1     670     20MB
27     698      7       17       300     732     41MB
28     976      5       17       488     977     40MB
29     306      4       17         0     340     10MB
30     611      4       17       306     663     20MB
31     732      7       17       300     732     43MB
32    1023      5       17        -1    1023     42MB
33     614      4       25        -1     663     30MB
34     775      2       27        -1     900     20MB
35     921      2       33        -1    1000     30MB
36     402      4       26        -1     460     20MB
37     580      6       26        -1     640     44MB
38     845      2       36        -1    1023     30MB
39     769      3       36        -1    1023     41MB
40     531      4       39        -1     532     40MB
41     577      2       36        -1    1023     20MB
42     654      2       32        -1     674     20MB
43     923      5       36        -1    1023     81MB
44     531      8       39        -1     532     81MB
45             -- user defined type --
</pre>
<p>
With the custom HDD type 45, you can use a drive with 1024 cylinders, 16 heads, and 62 sectors per track, for a maximum of 496MiB.<br />
Theoretically the maximum value for sectors per track would be 63 for a total of 504MiB, but a bug in the BIOS prevents the system to correctly format the drive.
</p>

<h3>GUI modes</h3>
<p>
IBMulator has 3 different GUI modes.
</p>
<ul>
<li><b>Compact</b>: in this mode the VGA image fills the available window space and 
the control panel, in the shape of the PS/1 system unit, disappears when input 
is grabbed or CTRL-F1 is pressed. Use this mode if you want an experience 
similar to DosBox.</li>
<li><b>Normal</b>: this is the default mode. The control panel / system unit places 
itself at the bottom of the VGA display and is always visible.</li>
<li><b>Realistic</b>: this is the hardcore mode, for the retro enthusiasts who want 
to truly experience the PS/1. In this mode the system is rendered in its 
entirety, monitor included. There are no additional buttons and controls except 
the originals: volume, brightness, contrast, power, and floppy (you need to use 
the key bindings for any extra function.) The PS/1 type 2011 is 32 cm (12.6") 
wide and 34.9 cm (13.74") tall, so you need at least a 24" 16:10 monitor in 
portrait mode (rotated) to render it at real size.</li>
</ul>
<p>
You can select the GUI mode under the [gui] section of the ibmulator.ini file.
</p>

<h3>Key bindings</h3>
<ul>
<li>CTRL+F1: show/hide the main interface (only if GUI is in compact mode)
<li>CTRL+F3: toggle the machine power button
<li>CTRL+F4: show/hide the debug windows
<li>CTRL+F5: take a screenshot
<li>CTRL+F6: start/stop audio capture
<li>CTRL+F7: save current state
<li>CTRL+F8: load last state
<li>CTRL+F10: mouse grab (only if CTRL+F10 is the mouse grab method)
<li>CTRL+F11: CPU emulation speed down
<li>CTRL+F12: CPU emulation speed up
<li>CTRL+DEL: send CTRL+ALT+DEL to the guest OS
<li>CTRL+INS: send SysReq to the guest OS
<li>ALT+ENTER: toggle fullscreen mode
<li>ALT+PAUSE: pause/resume emulation
<li>ALT+F4: exit the program
</ul>
<p>
If the grab method is 'MOUSE3', use the central mouse button to lock the mouse.
</p>

<h3>Command line options</h3>
<ul>
<li>-c PATH Sets a configuration file to use
<li>-u PATH Sets a user directory from where the program reads the ini file and stores new files, like screenshots and savestates
<li>-v NUM Sets the verbosity level (from 0 to 2)
</ul>

<hr />

<a href="#top"><h2 id="FAQ">FAQ</h2></a>
<p>
<b>Where am I supposed to put the ROM and what should I write in the ini file?</b>
<br />
The easiest way is to put the ROM set inside the same folder of ibmulator.ini and write its filename in the [memory] section. If you want to put the ROM set somewhere else then write its full path in the ini file.
</p>

<p>
<b>There are already plenty of emulators. Why another one?</b>
<br />
Why not? Most of the time a FOSS project starts by scratching a developer's personal itch. I had several itches, like: 
</p>
<ol>
<li>I wanted an emulator capable of running the IBM software.</li>
<li>At the time (early 2014), nobody was interested in emulating the PS/1 and its audio card.</li>
<li>I was looking for a new free time software project.</li>
<li>I wanted to learn something new (C++11, multithreading, x86 assembly, PC architecture.)</li>
<li>I always wanted to write an emulator.</li>
</ol>

<p>
<b>Why didn't you contribute to MESS / PCem / %EmulatorName% instead?</b>
<br />
I did think about it, but ended up voting against. Working in an existing environment has its own rather steep learning curve and I'm not an emulation expert nor a C/C++ professional.
</p>

<p>
<b>Why the IBM PS/1, an overpriced, slow PC compatible that was already absolete at launch?</b>
<br />
Nostalgia. Also I think that it has some interesting and dinstinctive features like the ROM SHELL.
</p>

<p>
<b>Can I contribute?</b>
<br />
Sure! See below for contact information.
</p>

<p>
<b>Can I reuse your code for %EmulatorName%?</b>
<br />
Yes, as long as you abide by the GPL's terms and conditions. Also, feel free to contact me for information about the PS/1 and its inner workings.
</p>


<hr />

<a href="#top"><h2 id="contact">Contact</h2></a>
<p>
For bugs and feature requests, please use the
<a href="https://github.com/barotto/IBMulator/issues">
GitHub tracker</a>. Otherwise by e-mail (see AUTHORS file in the source tarball).
</p>

<hr />

<a href="#top"><h2 id="disclaimer">Disclaimer</h2></a>
<p>
IBMulator is not a product of IBM Corporation nor is it sponsored by IBM Corporation in any way.
<br />
All trademarks and registered trademarks are the property of their respective owners.
</p>

<p style="text-align: center; margin-top: 2cm;">
<img src="c.gif" />
</p>
</body>
</html>

